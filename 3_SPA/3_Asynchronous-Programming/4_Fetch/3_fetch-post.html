<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <h1>Fetch/POST</h1>

    <p>
        Was ist post? Bei der HTTP methode POST senden wir daten an einen server, und bekommen eine antwort zurück, das
        macht zum beispiel sinn, wenn wir uns bei einer webseite einloggen, und der server uns validieren soll, er gibt,
        wenn unsere login daten korrekt waren, also zb username und password, ein "success: true", und zum beispiel
        unsere benutzerdaten zurück, was der webseite sagt, das wir tatsächlich einen account haben, und den mit den
        richtigen daten validiert haben. Wir haben das schon mal gesehen, als wir uns forms anschauten, und dort daten
        an formspree sendeten.
    </p>

    <p>
        Im gegensatz zu GET, müssen wir bei POST ein paar dinge angeben, wenn wir unseren fetch ausführen wollen.
    </p>

    <p>
        nicht nur müssen wir die methode angeben, die wir nutzen, also POST, wir müssen auch sogenannte header-daten
        anfügen, die dafür sorgen, das die verbindung informationen erhält, die sie benötigt um daten auszutauschen -
        denn dieser header wird mit unserem request versendet.
    </p>

    <script>
        const url = "https://httpbin.org/post"

        const data = {
            firstName: "Ali",
            lastName: "Babo",
            age: 69,
            isAdmin: false
        }

        fetch(url, {
            method: "POST",
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        }).then(response => {
            console.log(response);
            return response.json()
        }).then(data => {
            console.log(data);
            const parsedData = JSON.parse(data.data);
            console.log(parsedData.firstName)
            console.log(data.json.firstName)
            console.log(data.json.lastName)
            console.log(data.json.age)
        }).catch(e => console.log(e, e.message))
    </script>

</body>

</html>